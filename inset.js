let isInsetMapVisible=true;let currentBasemap='ocean';function toggleInsetMap(){const insetMap=document.getElementById('inset-map');const insetMapToggle=document.getElementById('insetMapToggle');if(isInsetMapVisible){insetMap.classList.add('hidden');insetMapToggle.classList.add('active');}else{insetMap.classList.remove('hidden');insetMapToggle.classList.remove('active');setTimeout(()=>{window.dispatchEvent(new Event('resize'));},300);}
isInsetMapVisible=!isInsetMapVisible;}
var insetMap=L.map('inset-map',{zoomControl:false,attributionControl:false,dragging:false,touchZoom:false,scrollWheelZoom:false,doubleClickZoom:false,boxZoom:false,keyboard:false}).setView([11.759852,107.418673],4);const insetSatellite=L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',{maxZoom:18,});const insetEsriOcean=L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}',{maxZoom:28,});const insetCartoVoyager=L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png',{maxZoom:28,});insetEsriOcean.addTo(insetMap);let insetBoundary;const updateInsetMap=()=>{const bounds=map.getBounds();insetMap.fitBounds(bounds,{padding:[20,20],animate:false});if(insetBoundary){insetMap.removeLayer(insetBoundary);}
insetBoundary=L.rectangle(bounds,{color:"#0b6e4f",weight:1}).addTo(insetMap);};map.on('move',updateInsetMap);map.on('zoom',updateInsetMap);updateInsetMap();document.getElementById('insetMapToggle').addEventListener('click',toggleInsetMap);insetMap.on('click',function(){switch(currentBasemap){case'ocean':currentBasemap='street';break;case'street':currentBasemap='satellite';break;case'satellite':currentBasemap='ocean';break;}
updateBasemap(currentBasemap);});function updateBasemap(newBasemap){insetMap.eachLayer(function(layer){if(layer instanceof L.TileLayer){insetMap.removeLayer(layer);}});switch(newBasemap){case'satellite':insetSatellite.addTo(insetMap);break;case'street':insetCartoVoyager.addTo(insetMap);break;case'ocean':insetEsriOcean.addTo(insetMap);break;}
map.eachLayer(function(layer){if(layer instanceof L.TileLayer){map.removeLayer(layer);}});switch(newBasemap){case'satellite':satellite.addTo(map);break;case'street':cartoVoyager.addTo(map);break;case'ocean':esriOcean.addTo(map);break;}
document.getElementById('insetMapToggle').addEventListener('click',toggleInsetMap);}
window.updateBasemap=updateBasemap;