const translations={en:{"Enterprise Platform":"Enterprise Platform","Switch Language":"Switch Language","Search":"Search",map:"Map","All Farms":"All Farms","farm(s)":"farm(s)",Alert:"Alert","Show farms needing attention":"Show farms needing attention",Durian:"Durian","Show Durian farms":"Show Durian farms",Coffee:"Coffee","Show Coffee farms":"Show Coffee farms",Pepper:"Pepper","Show Pepper farms":"Show Pepper farms",Tea:"Tea","Show Tea farms":"Show Tea farms","Managed Farms":"Managed Farms","Sort By":"Sort By",Status:"Status","Farm size":"Farm size","Last updated:":"Last updated:",Name:"Name",Produce:"Produce","Fetching farm data...":"Fetching farm data...","See lists of managed farms":"See lists of managed farms",Logout:"Logout","About the Application":"About the Application",About:"About","Map application to track and visualize deployed enfarm devices":"Map application to track and visualize deployed enfarm devices",Dismiss:"Dismiss","Locate User":"Locate User","Toggle fullscreen":"Toggle fullscreen","Toggle Inset Map":"Toggle Inset Map","Show Dashboard":"Show Dashboard",Dashboard:"Dashboard",farms:"farms","Land Area (Total)":"Land Area (Total)","enfarm devices deployed":"enfarm devices deployed","farms needing attention":"farms needing attention","Productivity (Total)":"Productivity (Total)","Current Prod.":"Current Prod.","Expected Prod.":"Expected Prod.","Coffee cultivation":"Coffee cultivation","Durian cultivation":"Durian cultivation","Pepper cultivation":"Pepper cultivation","Tea cultivation":"Tea cultivation","cultivate distribution":"cultivate distribution","Current Measure":"Current Measure","Historical Soil Data":"Historical Soil Data","Latest Measure":"Latest Measure","Insufficient Nutrients":"Insufficient Nutrients","Average Nutrients":"Average Nutrients","Adequate Nutrients":"Adequate Nutrients","Excess Nutrients":"Excess Nutrients","Very dry":"Very dry","Lack of water":"Lack of water","Enough moisture":"Enough moisture","Excess water":"Excess water","Neutral":"Neutral","Very Acidic":"Very Acidic","Acidic":"Acidic","Slightly Acidic":"Slightly Acidic","Slightly Alkaline":"Slightly Alkaline","Alkaline":"Alkaline","Very Alkaline":"Very Alkaline","Low Temp":"Low Temp","Average Temp":"Average Temp","High Temp":"High Temp","Min":"Min","Max":"Max","No data":"No data","latest measure":"(latest measure)","Moisture (%)":"Moisture (%)","Temperature (°c)":"Temperature (°c)","Coffee":"Coffee","Durian":"Durian","Pepper":"Pepper","Tea":"Tea","Show all":"Show all","Alert":"Alert","Show farms needing attention":"Show farms needing attention","Farm Area":"Farm Area","Tree Type":"Tree Type","Current Productivity":"Current Productivity","Expected Productivity":"Expected Productivity","Coffee":"Coffee","Durian":"Durian","Current Productivity":"Current Productivity","Expected Productivity":"Expected Productivity","Visualize farm in 3D":"Visualize farm in 3D","View soil data":"View soil data","Hide soil data":"Hide soil data","See detailed soil data available":"See detailed soil data available","In Depth":"In Depth","Show historical soil data":"Show historical soil data","Moisture":"Moisture","Temperature":"Temperature","Last updated":"Last updated"},vi:{"Enterprise Platform":"Nền tảng Doanh nghiệp","Switch Language":"Chuyển đổi ngôn ngữ","Search":"Tìm kiếm",map:"Bản đồ","All Farms":"Tất cả trang trại","farm(s)":"(trang trại)",Alert:"Cảnh báo","Show farms needing attention":"Hiển thị các trang trại cần chú ý",Durian:"Sầu riêng","Show Durian farms":"Hiển thị các trang trại sầu riêng",Coffee:"Cà phê","Show Coffee farms":"Hiển thị các trang trại cà phê",Pepper:"Tiêu","Show Pepper farms":"Hiển thị các trang trại tiêu",Tea:"Trà","Show Tea farms":"Hiển thị các trang trại trà","Managed Farms":"Các trang trại đã quản lý","Sort By":"Sắp xếp theo",Status:"Trạng thái","Farm size":"Kích thước trang trại","Last updated:":"Cập nhật lần cuối:",Name:"Tên",Produce:"Sản xuất","Fetching farm data...":"Đang lấy dữ liệu trang trại...","See lists of managed farms":"Xem danh sách các trang trại đã quản lý",Logout:"Đăng xuất","About the Application":"Thông tin ứng dụng",About:"Giới thiệu","Map application to track and visualize deployed enfarm devices":"Ứng dụng bản đồ để theo dõi và hiển thị các thiết bị enfarm đã triển khai",Dismiss:"Đóng","Locate User":"Định vị người dùng","Toggle fullscreen":"Chuyển đổi toàn màn hình","Toggle Inset Map":"Chuyển đổi bản đồ lồng ghép","Show Dashboard":"Hiển thị bảng điều khiển",Dashboard:"Bảng điều khiển",farms:"trang trại","Land Area (Total)":"Diện tích đất (Tổng cộng)","enfarm devices deployed":"thiết bị enfarm đã triển khai","farms needing attention":"trang trại cần chú ý","Productivity (Total)":"Năng suất (Tổng cộng)","Current Prod.":"Năng suất hiện tại","Expected Prod.":"Năng suất dự kiến","Coffee cultivation":"Trồng cà phê","Durian cultivation":"Trồng sầu riêng","Pepper cultivation":"Trồng tiêu","Tea cultivation":"Trồng trà","cultivate distribution":"phân phối canh tác","Current Measure":"Đo hiện tại","Historical Soil Data":"Dữ liệu đất lịch sử","Latest Measure":"Đo mới nhất","Insufficient Nutrients":"Thiếu dinh dưỡng","Average Nutrients":"Dinh dưỡng trung bình","Adequate Nutrients":"Dinh dưỡng đủ","Excess Nutrients":"Dư dinh dưỡng","Very dry":"Rất khô","Lack of water":"Thiếu nước","Enough moisture":"Độ ẩm đủ","Excess water":"Dư nước","Neutral":"Trung tính","Very Acidic":"Rất axit","Acidic":"Axit","Slightly Acidic":"Hơi axit","Slightly Alkaline":"Hơi kiềm","Alkaline":"Kiềm","Very Alkaline":"Rất kiềm","Low Temp":"Nhiệt độ thấp","Average Temp":"Nhiệt độ trung bình","High Temp":"Nhiệt độ cao","Min":"Tối thiểu","Max":"Tối đa","No data":"Không có dữ liệu","latest measure":"(đo lường mới nhất)","Moisture (%)":"Độ ẩm (%)","Temperature (°c)":"Nhiệt độ (°c)","Coffee":"Cà phê","Durian":"Sầu riêng","Pepper":"Tiêu","Tea":"Trà","Show all":"Hiển thị tất cả","Alert":"Cảnh báo","Show farms needing attention":"Hiển thị các trang trại cần chú ý","Farm Area":"Khu nông trại","Tree Type":"Loại cây","Current Productivity":"Năng suất hiện tại","Expected Productivity":"Năng suất dự kiến","Coffee":"Cà phê","Durian":"Sầu riêng","Current Productivity":"Năng suất hiện tại","Expected Productivity":"Năng suất dự kiến","Visualize farm in 3D":"Hiển thị nông trại trong 3D","View soil data":"Xem dữ liệu đất","Hide soil data":"Ẩn dữ liệu đất","See detailed soil data available":"Xem dữ liệu đất chi tiết có sẵn","In Depth":"Chiều sâu","Show historical soil data":"Xem dữ liệu lịch sử đất","Moisture":"Độ ẩm","Temperature":"Nhiệt độ","Last updated":"Cập nhật mới nhất"}};let currentLang='vi';function translateAllElements(){const elements=document.querySelectorAll('[data-translate]');elements.forEach(element=>{const key=element.getAttribute('data-translate');element.innerText=translations[currentLang][key]||element.innerText});const pepperButton=document.querySelector('.pepperFarms-filter');pepperButton.style.right=currentLang==='vi'?'408px':'390px';const langSwitchButton=document.getElementById('lang-switch');langSwitchButton.innerText=currentLang==='vi'?'EN ':'VN ';langSwitchButton.innerHTML+=currentLang==='vi'?'<i class="fa-solid fa-earth-americas"></i>':'<i class="fa-solid fa-earth-asia"></i>'}
document.addEventListener('DOMContentLoaded',translateAllElements);function toggleLanguage(){const elements=document.querySelectorAll('[data-translate]');const pepperButton=document.querySelector('.pepperFarms-filter');const langSwitchButton=document.getElementById('lang-switch');currentLang=currentLang==='vi'?'en':'vi';langSwitchButton.innerText=currentLang==='vi'?'EN ':'VN ';langSwitchButton.innerHTML+=currentLang==='vi'?'<i class="fa-solid fa-earth-americas"></i>':'<i class="fa-solid fa-earth-asia"></i>';elements.forEach(element=>{const key=element.getAttribute('data-translate');element.innerText=translations[currentLang][key]||element.innerText});document.querySelectorAll('[data-translate]').forEach(element=>{const key=element.getAttribute('data-translate');element.textContent=translations[currentLang][key]||element.textContent});map.eachLayer(function(layer){if(layer instanceof L.Marker&&layer.isPopupOpen()){const popup=layer.getPopup();const content=popup.getContent();const updatedContent=updatePopupLanguage(content);popup.setContent(updatedContent)}});if(currentLang==='vi'){pepperButton.style.right='408px'}else{pepperButton.style.right='390px'}
updateChartsLanguage();updateChartLanguage();updateNeedsAttentionButtonAppearance();updateDynamicContent();updateOpenPopupContent()}
function updateDynamicContent(){const showAllSpan=document.querySelector('.needs-attention span[data-translate="Show all"]');if(showAllSpan){showAllSpan.textContent=translations[currentLang]["Show all"]}
const alertSpan=document.querySelector('.needs-attention .attention-text');if(alertSpan){alertSpan.textContent=translations[currentLang].Alert}
const tooltipSpan=document.querySelector('.needs-attention .tooltip-bottom');if(tooltipSpan){tooltipSpan.textContent=translations[currentLang]["Show farms needing attention"]}}
function updateChartsLanguage(){const newMoistureLabel=currentLang==='vi'?"Độ ẩm (%)":"Moisture (%)";const newTemperatureLabel=currentLang==='vi'?"Nhiệt độ (°C)":"Temperature (°C)";if(typeof moistChart!=='undefined'&&moistChart!==null){moistChart.data.datasets[0].label=newMoistureLabel;moistChart.update()}
if(typeof tempChart!=='undefined'&&tempChart!==null){tempChart.data.datasets[0].label=newTemperatureLabel;tempChart.update()}
if(typeof treeTypeChart!=='undefined'&&treeTypeChart!==null){updateChartLanguage()}}
function getTranslatedLabels(){return[translations[currentLang].Coffee,translations[currentLang].Durian,translations[currentLang].Pepper,translations[currentLang].Tea]}
function updateChartLanguage(){if(treeTypeChart){const newLabels=getTranslatedLabels();treeTypeChart.data.labels=newLabels;treeTypeChart.options.plugins.legend.labels.generateLabels=function(chart){return newLabels.map((label,i)=>({text:label,fillStyle:chart.data.datasets[0].backgroundColor[i],hidden:!1,index:i}))};treeTypeChart.update()}}
